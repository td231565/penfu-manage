(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee2e16ec"],{"14c3":function(t,e,a){var r=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),i=a("7b0b"),l=a("50c4"),o=a("a691"),c=a("1d80"),s=a("8aa5"),u=a("14c3"),d=Math.max,f=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,D=b?"$":"$0";return[function(a,r){var n=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!b&&y||"string"===typeof r&&-1===r.indexOf(D)){var i=a(e,t,this,r);if(i.done)return i.value}var c=n(t),p=String(this),g="function"===typeof r;g||(r=String(r));var h=c.global;if(h){var _=c.unicode;c.lastIndex=0}var S=[];while(1){var E=u(c,p);if(null===E)break;if(S.push(E),!h)break;var w=String(E[0]);""===w&&(c.lastIndex=s(p,l(c.lastIndex),_))}for(var x="",P=0,k=0;k<S.length;k++){E=S[k];for(var C=String(E[0]),q=d(f(o(E.index),p.length),0),$=[],j=1;j<E.length;j++)$.push(v(E[j]));var O=E.groups;if(g){var L=[C].concat($,q,p);void 0!==O&&L.push(O);var A=String(r.apply(void 0,L))}else A=m(C,p,q,$,O,r);q>=P&&(x+=p.slice(P,q)+A,P=q+C.length)}return x+p.slice(P)}];function m(t,a,r,n,l,o){var c=r+t.length,s=n.length,u=h;return void 0!==l&&(l=i(l),u=g),e.call(o,u,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":o=l[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>s){var d=p(u/10);return 0===d?e:d<=s?void 0===n[d-1]?i.charAt(1):n[d-1]+i.charAt(1):e}o=n[u-1]}return void 0===o?"":o}))}}))},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},d784:function(t,e,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("d039"),i=a("b622"),l=a("9263"),o=a("9112"),c=i("species"),s=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var g=i(t),h=!n((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),v=h&&!n((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[g]=/./[g]),a.exec=function(){return e=!0,null},a[g](""),!e}));if(!h||!v||"replace"===t&&(!s||!u||f)||"split"===t&&!p){var b=/./[g],y=a(g,""[t],(function(t,e,a,r,n){return e.exec===l?h&&!n?{done:!0,value:b.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),D=y[0],m=y[1];r(String.prototype,t,D),r(RegExp.prototype,g,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}d&&o(RegExp.prototype[g],"sham",!0)}},d8af:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"w-100 rouned-3 mb-3"},[a("el-form",{attrs:{inline:"",model:t.queryData}},[a("div",{staticClass:"d-flex justify-content-between"},[a("el-form-item",{attrs:{label:"商品 ID"}},[a("el-input",{attrs:{placeholder:"請輸入商品 id"},model:{value:t.queryData.productID,callback:function(e){t.$set(t.queryData,"productID",e)},expression:"queryData.productID"}})],1),a("el-form-item",{attrs:{label:"名稱"}},[a("el-input",{attrs:{placeholder:"請輸入商品名稱"},model:{value:t.queryData.title,callback:function(e){t.$set(t.queryData,"title",e)},expression:"queryData.title"}})],1),a("el-form-item",{attrs:{label:"類別"}},[a("el-select",{attrs:{placeholder:"請選擇類別"},model:{value:t.queryData.category,callback:function(e){t.$set(t.queryData,"category",e)},expression:"queryData.category"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"票券",value:"票券"}}),a("el-option",{attrs:{label:"伴手禮",value:"伴手禮"}})],1)],1)],1),a("div",{staticClass:"d-flex justify-content-between"},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"起始日期"},model:{value:t.queryData.startDate,callback:function(e){t.$set(t.queryData,"startDate",e)},expression:"queryData.startDate"}}),a("i",{staticClass:"el-icon-minus mx-2"}),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"結束日期"},model:{value:t.queryData.endDate,callback:function(e){t.$set(t.queryData,"endDate",e)},expression:"queryData.endDate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.fetchData(1,t.page.size)}}},[t._v("搜尋")])],1)],1)])],1),a("el-card",{staticClass:"w-100 rouned-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-4"},[a("h5",{staticClass:"my-0"},[t._v("銷售列表")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"商品 ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"類別",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.category)+" ")]}}])}),a("el-table-column",{attrs:{label:"名稱",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}}])}),a("el-table-column",{attrs:{label:"銷售數量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.saleNum)+" ")]}}])}),a("el-table-column",{attrs:{label:"銷售總計",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.totalRevenue)+" 元 ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"75",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查詢明細",placement:"top"}},[a("el-button",{attrs:{type:"text",size:"large"},on:{click:function(a){return t.showDialog(e.row.id,e.row.title)}}},[a("i",{staticClass:"el-icon-s-order fs-4"})])],1)]}}])})],1),a("div",{staticClass:"d-flex justify-content-end align-items-center mt-3"},[a("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":[10,30,50,100],"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"current",e)},"update:current-page":function(e){return t.$set(t.page,"current",e)},"current-change":function(e){return t.fetchData(e,t.page.size)},"size-change":function(e){return t.fetchData(1,e)}}})],1)],1),a("el-dialog",{attrs:{title:"銷售明細 - ID "+t.selectedProduct.id+" "+t.selectedProduct.title,visible:t.isShowDialog,width:"70%"},on:{"update:visible":function(e){t.isShowDialog=e}}},[t.queryData.startDate?a("div",{staticClass:"mb-3"},[a("span",[t._v("日期")]),a("span",{staticClass:"ms-2 fw-bold"},[t._v(t._s(t.queryData.startDate)+" ~ "+t._s(t.queryData.endDate))])]):t._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.selectedProduct.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"價錢",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price)+" ")]}}])}),a("el-table-column",{attrs:{label:"數量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.totalNumber)+" ")]}}])}),a("el-table-column",{attrs:{label:"總銷售額",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.totalPrice)+" ")]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"d-flex justify-content-center"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isShowDialog=!1}}},[t._v("確認")])],1)])],1)],1)},n=[],i=a("5530"),l=(a("e9c4"),a("d81d"),a("fb6a"),a("ac1f"),a("5319"),a("f8b7")),o=a("2f62"),c={name:"SaleList",data:function(){return{list:[],listLoading:!0,page:{current:1,size:10,total:0},queryData:{productID:"",title:"",category:"",startDate:"",endDate:""},isShowDialog:!1,selectedProduct:{id:0,title:"",list:[]}}},computed:Object(i["a"])({},Object(o["b"])(["salePage","saleQuery"])),created:function(){this.page=JSON.parse(JSON.stringify(this.salePage)),this.queryData=JSON.parse(JSON.stringify(this.saleQuery));var t=this.page,e=t.current,a=t.size;this.fetchData(e,a)},beforeDestroy:function(){this.SET_SALE_PAGE(this.page),this.SET_SALE_QUERY(this.queryData)},methods:Object(i["a"])(Object(i["a"])({},Object(o["c"])("lists",["SET_SALE_PAGE","SET_SALE_QUERY"])),{},{fetchData:function(t,e){var a=this;this.listLoading=!0,Object(l["c"])(t,e,this.queryData).then((function(e){a.list=e.order.map((function(t){return t.isCheck=!1,t})),a.page.current=t,a.page.total=e.total,a.listLoading=!1})).catch((function(t){console.log(t)}))},showDialog:function(t,e){this.selectedProduct.id===t?this.isShowDialog=!0:(this.selectedProduct.id=t,this.selectedProduct.title=e,this.getProductSaleData(t))},getProductSaleData:function(t){var e=this;this.listLoading=!0,this.selectedProduct.id=t;var a=this.queryData,r=a.startDate,n=a.endDate;Object(l["b"])({productID:t,startDate:r,endDate:n}).then((function(t){e.selectedProduct.list=t.order,e.isShowDialog=!0,e.listLoading=!1})).catch((function(){e.listLoading=!1}))},showDate:function(t){return t.replace("T"," ").slice(0,-3)}})},s=c,u=a("2877"),d=Object(u["a"])(s,r,n,!1,null,"67811e03",null);e["default"]=d.exports},e9c4:function(t,e,a){var r=a("23e7"),n=a("d066"),i=a("d039"),l=n("JSON","stringify"),o=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var r=a.charAt(e-1),n=a.charAt(e+1);return c.test(t)&&!s.test(n)||s.test(t)&&!c.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},d=i((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,a){var r=l.apply(null,arguments);return"string"==typeof r?r.replace(o,u):r}})},f8b7:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return c}));var r=a("5530"),n=a("b775");function i(t,e,a){return Object(n["a"])({url:"order/saleCount/",method:"post",data:Object(r["a"])({page:t,numberPerPage:e},a)})}function l(t){return Object(n["a"])({url:"order/saleDetail/",method:"post",data:t})}function o(t,e,a){return Object(n["a"])({url:"order/backend/list/",method:"post",data:Object(r["a"])({page:t,numberPerPage:e},a)})}function c(t){return Object(n["a"])({url:"order/".concat(t),method:"patch",data:{status:1}})}}}]);