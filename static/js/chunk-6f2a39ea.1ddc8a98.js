(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f2a39ea"],{"14c3":function(t,e,n){var a=n("c6b6"),r=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var c=n.call(t,e);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},5319:function(t,e,n){"use strict";var a=n("d784"),r=n("825a"),c=n("7b0b"),i=n("50c4"),o=n("a691"),u=n("1d80"),s=n("8aa5"),l=n("14c3"),f=Math.max,d=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,n,a){var b=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=a.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(n,a){var r=u(this),c=void 0==n?void 0:n[t];return void 0!==c?c.call(n,r,a):e.call(String(r),n,a)},function(t,a){if(!b&&m||"string"===typeof a&&-1===a.indexOf(y)){var c=n(e,t,this,a);if(c.done)return c.value}var u=r(t),p=String(this),h="function"===typeof a;h||(a=String(a));var g=u.global;if(g){var D=u.unicode;u.lastIndex=0}var C=[];while(1){var _=l(u,p);if(null===_)break;if(C.push(_),!g)break;var x=String(_[0]);""===x&&(u.lastIndex=s(p,i(u.lastIndex),D))}for(var E="",w=0,S=0;S<C.length;S++){_=C[S];for(var O=String(_[0]),P=f(d(o(_.index),p.length),0),$=[],A=1;A<_.length;A++)$.push(v(_[A]));var R=_.groups;if(h){var j=[O].concat($,P,p);void 0!==R&&j.push(R);var T=String(a.apply(void 0,j))}else T=k(O,p,P,$,R,a);P>=w&&(E+=p.slice(w,P)+T,w=P+O.length)}return E+p.slice(w)}];function k(t,n,a,r,i,o){var u=a+t.length,s=r.length,l=g;return void 0!==i&&(i=c(i),l=h),e.call(o,l,(function(e,c){var o;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,a);case"'":return n.slice(u);case"<":o=i[c.slice(1,-1)];break;default:var l=+c;if(0===l)return e;if(l>s){var f=p(l/10);return 0===f?e:f<=s?void 0===r[f-1]?c.charAt(1):r[f-1]+c.charAt(1):e}o=r[l-1]}return void 0===o?"":o}))}}))},"7db0":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").find,c=n("44d2"),i=n("ae40"),o="find",u=!0,s=i(o);o in[]&&Array(1)[o]((function(){u=!1})),a({target:"Array",proto:!0,forced:u||!s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),c(o)},"8aa5":function(t,e,n){"use strict";var a=n("6547").charAt;t.exports=function(t,e,n){return e+(n?a(t,e).length:1)}},c4c8:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return s}));var a=n("5530"),r=n("b775");function c(t,e,n){return Object(r["a"])({url:"product/list/",method:"post",data:Object(a["a"])({page:t,numberPerPage:e},n)})}function i(t){return Object(r["a"])({url:"product/".concat(t),method:"get"})}function o(t){return Object(r["a"])({url:"product/",method:"post",data:t})}function u(t,e){return Object(r["a"])({url:"product/".concat(e),method:"patch",data:t})}function s(t){return Object(r["a"])({url:"product/",method:"delete",data:{id:t}})}},d1e8:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"w-100 rouned-3 mb-3"},[n("el-form",{attrs:{inline:"",model:t.queryData}},[n("div",{staticClass:"d-flex"},[n("el-form-item",{attrs:{label:"名稱"}},[n("el-input",{attrs:{placeholder:"請輸入商品名稱"},model:{value:t.queryData.search,callback:function(e){t.$set(t.queryData,"search",e)},expression:"queryData.search"}})],1),n("el-form-item",{attrs:{label:"類別"}},[n("el-select",{attrs:{placeholder:"請選擇類別"},model:{value:t.queryData.category,callback:function(e){t.$set(t.queryData,"category",e)},expression:"queryData.category"}},[n("el-option",{attrs:{label:"票券",value:"票券"}}),n("el-option",{attrs:{label:"伴手禮",value:"伴手禮"}})],1)],1)],1),n("div",{staticClass:"d-flex justify-content-between"},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"起始日期"},model:{value:t.queryData.startDate,callback:function(e){t.$set(t.queryData,"startDate",e)},expression:"queryData.startDate"}}),n("i",{staticClass:"el-icon-minus mx-2"}),n("el-date-picker",{attrs:{type:"date",placeholder:"結束日期"},model:{value:t.queryData.endDate,callback:function(e){t.$set(t.queryData,"endDate",e)},expression:"queryData.endDate"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.fetchData(1,t.page.size)}}},[t._v("搜尋")])],1)],1)])],1),n("el-card",{staticClass:"w-100 rouned-3"},[n("div",{staticClass:"d-flex justify-content-between align-items-center mb-4"},[n("h5",{staticClass:"my-0"},[t._v("商品列表")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.gotoCreatePage}},[t._v("添加商品")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{model:{value:e.row.isCheck,callback:function(n){t.$set(e.row,"isCheck",n)},expression:"scope.row.isCheck"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"商品 ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"類別",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.category)+" ")]}}])}),n("el-table-column",{attrs:{label:"名稱",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}}])}),n("el-table-column",{attrs:{label:"銷售數量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.saleNum)+" ")]}}])}),n("el-table-column",{attrs:{label:"商品價格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price)+" 元 ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"updated_at",label:"更新時間",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),n("span",[t._v(t._s(t.showDate(e.row.update_time)))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"75",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"編輯",placement:"top"}},[n("el-button",{attrs:{type:"text",size:"large"},on:{click:function(n){return t.gotoEditPage(e.row.id)}}},[n("i",{staticClass:"el-icon-edit"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top"}},[n("el-button",{attrs:{type:"text",size:"large"},on:{click:function(n){return t.showRemoveConfirm([e.row.id])}}},[n("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),n("div",{staticClass:"d-flex justify-content-between align-items-center mt-3"},[n("div",{staticClass:"d-flex align-items-center"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.checkAllRow},model:{value:t.isCheckAll,callback:function(e){t.isCheckAll=e},expression:"isCheckAll"}},[t._v("全選")]),n("el-button",{staticClass:"ms-3",attrs:{type:"danger",plain:""},on:{click:function(e){return t.showRemoveConfirm(t.checkedIdList)}}},[t._v("刪除")])],1),n("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":[10,30,50,100],"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"current",e)},"update:current-page":function(e){return t.$set(t.page,"current",e)},"current-change":function(e){return t.fetchData(e,t.page.size)},"size-change":function(e){return t.fetchData(1,e)}}})],1)],1)],1)},r=[],c=n("5530"),i=(n("d3b7"),n("d81d"),n("4de4"),n("e9c4"),n("159b"),n("fb6a"),n("ac1f"),n("5319"),n("7db0"),n("2f62")),o=n("c4c8"),u={name:"ProductList",data:function(){return{list:[],listLoading:!0,page:{current:1,size:10,total:0},queryData:{search:"",category:"",startDate:"",endDate:""},isCheckAll:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(i["b"])(["productPage","productQuery"])),{},{isIndeterminate:function(){return this.list.some((function(t){var e=t.isCheck;return e}))&&!this.isCheckAll},checkedIdList:function(){return this.list.filter((function(t){var e=t.isCheck;return e})).map((function(t){var e=t.id;return e}))}}),created:function(){this.page=JSON.parse(JSON.stringify(this.productPage)),this.queryData=JSON.parse(JSON.stringify(this.productQuery));var t=this.page,e=t.current,n=t.size;this.fetchData(e,n)},beforeDestroy:function(){this.SET_PRODUCT_PAGE(this.page),this.SET_PRODUCT_QUERY(this.queryData)},methods:Object(c["a"])(Object(c["a"])({},Object(i["c"])("lists",["SET_PRODUCT_PAGE","SET_PRODUCT_QUERY"])),{},{fetchData:function(t,e){var n=this;this.listLoading=!0,Object(o["c"])(t,e,this.queryData).then((function(e){n.list=e.attraction.map((function(t){return t.isCheck=!1,t})),n.page.current=t,n.page.total=e.total,n.listLoading=!1})).catch((function(t){console.log(t)}))},gotoCreatePage:function(){this.$router.push({name:"ProductCreate"})},gotoEditPage:function(t){this.$router.push({name:"ProductEdit",params:{id:t}})},checkAllRow:function(){var t=this;this.list.forEach((function(e){e.isCheck=t.isCheckAll}))},checkOneRow:function(t){this.isCheckAll=t&&this.list.every((function(t){var e=t.isCheck;return e}))},showRemoveConfirm:function(t){var e=this;this.$confirm("確定要刪除選擇的商品嗎？","Warning",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){e.listLoading=!0,Object(o["a"])(t).then((function(){e.$message({type:"success",message:"刪除成功"});var n=e.page,a=n.current,r=n.size,c=n.total;1===a?e.fetchData(1,r):(c-t.length)/r===a-1&&1!==a?e.fetchData(a-1,r):e.fetchData(a,r),e.listLoading=!1}))})).catch((function(){e.listLoading=!1}))},showDate:function(t){return t.replace("T"," ").slice(0,-3)},switchStatus:function(t,e){var n=this;Object(o["d"])({status:t?1:0},e).then((function(a){n.list.find((function(t){return t.id===e})).status=t?1:0})).catch((function(){}))},checkStatus:function(t){return 1===t}})},s=u,l=n("2877"),f=Object(l["a"])(s,a,r,!1,null,"78315086",null);e["default"]=f.exports},d784:function(t,e,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),c=n("b622"),i=n("9263"),o=n("9112"),u=c("species"),s=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=c("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var h=c(t),g=!r((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),v=g&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!g||!v||"replace"===t&&(!s||!l||d)||"split"===t&&!p){var b=/./[h],m=n(h,""[t],(function(t,e,n,a,r){return e.exec===i?g&&!r?{done:!0,value:b.call(e,n,a)}:{done:!0,value:t.call(n,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],k=m[1];a(String.prototype,t,y),a(RegExp.prototype,h,2==e?function(t,e){return k.call(t,this,e)}:function(t){return k.call(t,this)})}f&&o(RegExp.prototype[h],"sham",!0)}},e9c4:function(t,e,n){var a=n("23e7"),r=n("d066"),c=n("d039"),i=r("JSON","stringify"),o=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var a=n.charAt(e-1),r=n.charAt(e+1);return u.test(t)&&!s.test(r)||s.test(t)&&!u.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},f=c((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&a({target:"JSON",stat:!0,forced:f},{stringify:function(t,e,n){var a=i.apply(null,arguments);return"string"==typeof a?a.replace(o,l):a}})}}]);