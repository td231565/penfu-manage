(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c4f1"],{f34b:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"app-container"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"店家帳號",prop:"username"}},[o("el-input",{attrs:{placeholder:"請輸入店家帳號"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),o("el-form-item",{attrs:{label:"店家密碼",prop:"password"}},[o("el-input",{attrs:{placeholder:"請輸入店家密碼"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),o("p",{staticClass:"text-secondary mt-1 mb-0 lh-sm",staticStyle:{"font-size":"0.75rem"}},[e._v("第一次設定密碼或是忘記密碼時使用")])],1),o("el-form-item",{attrs:{label:"店家名稱",prop:"name"}},[o("el-input",{attrs:{placeholder:"請輸入店家名稱"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"負責人姓名",prop:"representative"}},[o("el-input",{attrs:{placeholder:"請輸入負責人姓名"},model:{value:e.form.representative,callback:function(t){e.$set(e.form,"representative",t)},expression:"form.representative"}})],1),o("el-form-item",{attrs:{label:"室內電話",prop:"phoneNumber"}},[o("el-input",{attrs:{type:"tel",placeholder:"請輸入室內電話"},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),o("el-form-item",{attrs:{label:"手機號碼",prop:"cellphone"}},[o("el-input",{attrs:{type:"tel",placeholder:"請輸入手機號碼"},model:{value:e.form.cellphone,callback:function(t){e.$set(e.form,"cellphone",t)},expression:"form.cellphone"}})],1),o("el-form-item",{attrs:{label:"店家地址"}},[o("el-input",{attrs:{placeholder:"請設定店家地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),o("el-form-item",{attrs:{label:"Email",prop:"email"}},[o("el-input",{attrs:{type:"email",placeholder:"請輸入 Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),o("el-form-item",{attrs:{label:"店家網站",prop:"website"}},[o("el-input",{attrs:{placeholder:"請輸入網址"},model:{value:e.form.website,callback:function(t){e.$set(e.form,"website",t)},expression:"form.website"}})],1),o("el-form-item",{staticClass:"pt-4",attrs:{label:"店家匯款資訊"}}),o("el-form-item",{attrs:{label:"匯款銀行"}},[o("div",{staticClass:"d-flex"},[o("el-input",{attrs:{placeholder:"銀行名稱"},model:{value:e.form.accountBank,callback:function(t){e.$set(e.form,"accountBank",t)},expression:"form.accountBank"}})],1),o("div",{staticClass:"mt-3"},[o("el-input",{attrs:{placeholder:"分行名稱"},model:{value:e.form.accountBankBranch,callback:function(t){e.$set(e.form,"accountBankBranch",t)},expression:"form.accountBankBranch"}})],1)]),o("el-form-item",{attrs:{label:"匯款戶名",prop:"accountName"}},[o("el-input",{attrs:{placeholder:"請輸入匯款戶名"},model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1),o("el-form-item",{attrs:{label:"匯款帳號",prop:"accountSeries"}},[o("el-input",{attrs:{type:"tel",placeholder:"請輸入匯款帳號"},model:{value:e.form.accountSeries,callback:function(t){e.$set(e.form,"accountSeries",t)},expression:"form.accountSeries"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新增")]),o("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1)],1)},r=[],s=o("b775");function n(e){return Object(s["a"])({url:"business_info/".concat(e),method:"get"})}function l(e){return Object(s["a"])({url:"users/change_password_admin/",method:"patch",data:e})}function i(e){return Object(s["a"])({url:"business_info/register/",method:"post",data:e})}function c(e){return Object(s["a"])({url:"business_info/",method:"patch",data:e})}var m={name:"StoreCreate",data:function(){return{isLoading:!1,form:{category:"店家",lineID:"default",status:1},isCreate:!0}},computed:{},created:function(){var e=this.$route.params.id;e&&(this.isCreate=!1,this.getStoreDetail(e))},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("請確認必填欄位輸入完整"),!1;e.isLoading=!0,e.isCreate?i(e.form).then((function(t){e.$message({type:"success",message:"新增店家成功"}),e.$router.push({name:"StoreList"}),e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1})):c(e.form).then((function(){if(e.form.password){var t=e.form,o=t.id,a=t.password,r={id:o,newPassword:a};l(r).then((function(){e.$message({type:"success",message:"修改店家資料成功"}),e.$router.push({name:"StoreList"}),e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1}))}else e.$message({type:"success",message:"修改店家資料成功"}),e.$router.push({name:"StoreList"}),e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1}))}))},getStoreDetail:function(e){var t=this;this.isLoading=!0,n(e).then((function(e){t.form=e.Business,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},gotoList:function(){var e=this;this.$confirm("確定返回列表嗎？資料將不會儲存").then((function(){e.$router.push({name:"StoreList"})}))}}},u=m,f=o("2877"),p=Object(f["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports}}]);